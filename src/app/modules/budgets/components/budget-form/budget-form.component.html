<div class="form-container">
  <div class="form-card">
    <h2>{{ isEditMode ? 'Modifier le budget' : 'Nouveau budget' }}</h2>

    <form [formGroup]="budgetForm" (ngSubmit)="onSubmit()">
      <div class="form-group">
        <label for="category">Catégorie</label>
        <select
          id="category"
          class="form-control"
          [class.is-invalid]="submitted && f['category'].errors"
          formControlName="category"
        >
          <option *ngFor="let cat of categories" [value]="cat">{{ cat }}</option>
        </select>
      </div>

      <div class="form-group">
        <label for="limit">Limite (TND)</label>
        <input
          type="number"
          id="limit"
          class="form-control"
          [class.is-invalid]="submitted && f['limit'].errors"
          formControlName="limit"
          step="0.01"
          min="0"
          placeholder="0.00"
        />
        <div class="invalid-feedback" *ngIf="submitted && f['limit'].errors">
          <small *ngIf="f['limit'].errors['required']">La limite est requise</small>
          <small *ngIf="f['limit'].errors['min']">La limite doit être positive</small>
        </div>
      </div>

      <div class="form-group">
        <label for="month">Mois</label>
        <input
          type="month"
          id="month"
          class="form-control"
          [class.is-invalid]="submitted && f['month'].errors"
          formControlName="month"
        />
      </div>

      <div class="form-actions">
        <button type="submit" class="btn btn-primary" [disabled]="loading">
          {{ loading ? 'En cours...' : 'Enregistrer' }}
        </button>
        <button type="button" class="btn btn-secondary" (click)="router.navigate(['/budgets'])">
          Annuler
        </button>
      </div>
    </form>
  </div>
</div>
